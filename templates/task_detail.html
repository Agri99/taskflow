{% extends "base.html" %}

{% block content %}

<h2>{{ task.title }}</h2>
<p>{{ task.description }}</p>
<p>Status: {{ task.get_status_display }}</p>
<p>Priority: {{ task.get_priority_display }}</p>

<hr>

<h3>Comments</h3>

<a href="{% url 'comments:comment-add' task.id %}">Add Comment</a>

<ul>
    {% for comment in comments %}
    <li>
        <strong>{{ comment.author.username }}</strong>
        {{ comment.content }}
        <small>{{ comment.created_at }}</small>
        {% if user == comment.author or user == task.owner %}
            <form action="{% url 'comments:comment-delete' comment.pk %}" method="post">
                {% csrf_token %}
                <button type="submit">Delete</button>
            </form>
        {% endif %}
    </li>
    {% empty %}
    <li>No comment yet.</li>
    {% endfor %}
</ul>

{% endblock content %}